{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Game.js"],"names":["cc","Class","extends","Component","properties","maxStarDuration","minStarDuration","starPrefab","default","type","Prefab","ground","Node","player","scoreDisplay","Label","onLoad","groundY","y","height","timer","starDuration","spawnNewStar","score","start","newStar","instantiate","node","addChild","setPosition","getNewStarPosition","getComponent","game","random0To1","randX","randY","jumpHeight","maxX","width","randomMinus1To1","p","gainScore","string","toString","update","dt","console","log","gameOver","stopAllActions","director","loadScene"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,yBAAkB,CADV;AAERC,yBAAkB,CAFV;AAGR;AACAC,oBAAa;AACTC,qBAAU,IADD;AAETC,kBAAOT,GAAGU;AAFD,SAJL;AAQRC,gBAAS;AACLH,qBAAU,IADL;AAELC,kBAAMT,GAAGY;AAFJ,SARD;AAYRC,gBAAS;AACLL,qBAAU,IADL;AAELC,kBAAMT,GAAGY;AAFJ,SAZD;AAgBRE,sBAAe;AACXN,qBAAU,IADC;AAEXC,kBAAOT,GAAGe;AAFC;AAhBP,KAHP;;AAyBL;;AAEAC,UA3BK,oBA2BK;AACN,aAAKC,OAAL,GAAe,KAAKN,MAAL,CAAYO,CAAZ,GAAgB,KAAKP,MAAL,CAAYQ,MAAZ,GAAqB,CAApD;AACA,aAAKC,KAAL,GAAa,CAAb;AACA,aAAKC,YAAL,GAAoB,CAApB;AACA,aAAKC,YAAL;AACA,aAAKC,KAAL,GAAa,CAAb;AACH,KAjCI;AAmCLC,SAnCK,mBAmCI,CAER,CArCI;;;AAuCLF,kBAAe,wBAAW;AACtB,YAAIG,UAAUzB,GAAG0B,WAAH,CAAgB,KAAKnB,UAArB,CAAd;AACA;AACA,aAAKoB,IAAL,CAAUC,QAAV,CAAoBH,OAApB;AACAA,gBAAQI,WAAR,CAAqB,KAAKC,kBAAL,EAArB;;AAEAL,gBAAQM,YAAR,CAAsB,MAAtB,EAA+BC,IAA/B,GAAsC,IAAtC,CANsB,CAMsB;AAC5C,aAAKX,YAAL,GAAoB,KAAKf,eAAL,GAAuBN,GAAGiC,UAAH,MAAmB,KAAK5B,eAAL,GAAuB,KAAKC,eAA/C,CAA3C;AACA,aAAKc,KAAL,GAAa,CAAb;AACH,KAhDI;;AAkDLU,wBAAqB,8BAAW;AAC5B,YAAII,QAAQ,CAAZ;AACA;AACA,YAAIC,QAAQ,KAAKlB,OAAL,GAAejB,GAAGiC,UAAH,KAAkB,KAAKpB,MAAL,CAAYkB,YAAZ,CAAyB,QAAzB,EAAmCK,UAApE,GAAiF,EAA7F;AACA;AACA,YAAIC,OAAO,KAAKV,IAAL,CAAUW,KAAV,GAAgB,CAA3B;AACAJ,gBAAQlC,GAAGuC,eAAH,KAAuBF,IAA/B;AACA;AACA,eAAOrC,GAAGwC,CAAH,CAAKN,KAAL,EAAYC,KAAZ,CAAP;AACH,KA3DI;;AA6DLM,eAAY,qBAAW;AACnB,aAAKlB,KAAL,IAAc,CAAd;AACA,aAAKT,YAAL,CAAkB4B,MAAlB,GAA2B,YAAY,KAAKnB,KAAL,CAAWoB,QAAX,EAAvC;AACH,KAhEI;;AAkELC,YAAS,gBAAUC,EAAV,EAAc;AACnB,YAAK,KAAKzB,KAAL,GAAa,KAAKC,YAAvB,EAAsC;AAClCyB,oBAAQC,GAAR,CAAa,MAAb;AACA,iBAAKC,QAAL;AACA;AACH;AACD,aAAK5B,KAAL,IAAcyB,EAAd;AACH,KAzEI;AA0ELG,cAAW,oBAAW;AAClB,aAAKnC,MAAL,CAAYoC,cAAZ;AACAjD,WAAGkD,QAAH,CAAYC,SAAZ,CAAuB,MAAvB,EAFkB,CAEe;AACpC;AA7EI,CAAT","file":"Game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        maxStarDuration : 0,\r\n        minStarDuration : 0,\r\n        // 这里进行关联\r\n        starPrefab : {\r\n            default : null,\r\n            type : cc.Prefab\r\n        },\r\n        ground : {\r\n            default : null,\r\n            type: cc.Node\r\n        },\r\n        player : {\r\n            default : null,\r\n            type: cc.Node\r\n        },\r\n        scoreDisplay : {\r\n            default : null,\r\n            type : cc.Label\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.groundY = this.ground.y + this.ground.height / 2;\r\n        this.timer = 0;\r\n        this.starDuration = 0;\r\n        this.spawnNewStar();\r\n        this.score = 0;\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    spawnNewStar : function() {\r\n        var newStar = cc.instantiate( this.starPrefab );\r\n        // this.node 指向canvas\r\n        this.node.addChild( newStar );\r\n        newStar.setPosition( this.getNewStarPosition() );\r\n\r\n        newStar.getComponent( 'Star' ).game = this; // 感觉是反射\r\n        this.starDuration = this.minStarDuration + cc.random0To1() * (this.maxStarDuration - this.minStarDuration);\r\n        this.timer = 0;\r\n    },\r\n\r\n    getNewStarPosition : function() {\r\n        var randX = 0;\r\n        // 根据地平面位置和主角跳跃高度，随机得到一个星星的 y 坐标\r\n        var randY = this.groundY + cc.random0To1() * this.player.getComponent('Player').jumpHeight + 50;\r\n        // 根据屏幕宽度，随机得到一个星星 x 坐标\r\n        var maxX = this.node.width/2;\r\n        randX = cc.randomMinus1To1() * maxX;\r\n        // 返回星星坐标\r\n        return cc.p(randX, randY); \r\n    },\r\n\r\n    gainScore : function() {\r\n        this.score += 1;\r\n        this.scoreDisplay.string = 'Score: ' + this.score.toString();\r\n    },\r\n\r\n    update : function (dt) {\r\n        if ( this.timer > this.starDuration ) {\r\n            console.log( 'asdf' );\r\n            this.gameOver();\r\n            return;\r\n        }\r\n        this.timer += dt;\r\n    },\r\n    gameOver : function() {\r\n        this.player.stopAllActions();\r\n        cc.director.loadScene( 'game' ); // 从头开始游戏\r\n    }\r\n});\r\n"]}