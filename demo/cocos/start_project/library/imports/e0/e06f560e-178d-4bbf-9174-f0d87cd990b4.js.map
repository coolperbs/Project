{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Star.js"],"names":["cc","Class","extends","Component","properties","pickRadius","start","update","dt","getPlayerDistance","onPicked","op","game","timer","starDuration","minOp","node","opacity","Math","floor","playerPos","player","getPosition","dist","pDistance","position","spawnNewStar","gainScore","destroy"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAa;AADL,KAHP;;AAOL;;AAEA;;;AAGAC,SAZK,mBAYI,CAER,CAdI;;;AAgBLC,YAAS,gBAAUC,EAAV,EAAe;AACpB,YAAK,KAAKC,iBAAL,KAA2B,KAAKJ,UAArC,EAAkD;AAC9C,iBAAKK,QAAL;AACA;AACH;AACD,YAAIC,KAAK,IAAI,KAAKC,IAAL,CAAUC,KAAV,GAAkB,KAAKD,IAAL,CAAUE,YAAzC;AACA,YAAIC,QAAQ,EAAZ;AACA,aAAKC,IAAL,CAAUC,OAAV,GAAoBF,QAAQG,KAAKC,KAAL,CAAYR,MAAO,MAAMI,KAAb,CAAZ,CAA5B;AACH,KAxBI;;AA0BLN,uBAAoB,6BAAW;AAC3B,YAAIW,YAAY,KAAKR,IAAL,CAAUS,MAAV,CAAiBC,WAAjB,EAAhB;AACA,YAAIC,OAAOvB,GAAGwB,SAAH,CAAc,KAAKR,IAAL,CAAUS,QAAxB,EAAkCL,SAAlC,CAAX;AACA,eAAOG,IAAP;AACH,KA9BI;;AAgCLb,cAAU,oBAAW;AACjB,aAAKE,IAAL,CAAUc,YAAV,GADiB,CACS;AAC1B,aAAKd,IAAL,CAAUe,SAAV;AACA,aAAKX,IAAL,CAAUY,OAAV,GAHiB,CAGI;AACxB;AApCI,CAAT","file":"Star.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        pickRadius : 60\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update : function( dt ) {\r\n        if ( this.getPlayerDistance() < this.pickRadius ) {\r\n            this.onPicked();\r\n            return;\r\n        }\r\n        var op = 1 - this.game.timer / this.game.starDuration;\r\n        var minOp = 50;\r\n        this.node.opacity = minOp + Math.floor( op * ( 255 - minOp ) );\r\n    },\r\n\r\n    getPlayerDistance : function() {\r\n        var playerPos = this.game.player.getPosition(); \r\n        var dist = cc.pDistance( this.node.position, playerPos );\r\n        return dist;\r\n    },\r\n\r\n    onPicked :function() {\r\n        this.game.spawnNewStar(); // 创建新的星星\r\n        this.game.gainScore();\r\n        this.node.destroy(); // 销毁当前节点\r\n    }\r\n});\r\n"]}