!function(){var a,b,c,d,e;d={COOKIE_UPDATE_TIME:"updateTime",COOKIE_INITED:"inited",STATIC_URL:window.kayak.root},b={loadJs:function(b,e){e=e+""||"";var f,g,h,i=document.getElementsByTagName("script"),j=a.getSourceRoot(),k=(c.get(d.COOKIE_UPDATE_TIME),[]);for(f=0;g=i[f];++f)h=g.getAttribute("data-src"),h&&(h=j+h,h=e?h+"?t="+e:h,k.push(h));a.loadJsWrapper(k,b)},loadCss:function(b){b=b+""||"";var e,f,g,h=document.getElementsByTagName("link"),i=a.getSourceRoot();c.get(d.COOKIE_UPDATE_TIME);for(e=0;f=h[e];++e)g=f.getAttribute("data-href"),g&&(g=i+g,g=b?g+"?t="+b:g,f.href=g)}},c={get:function(a){var b=new RegExp("(^|;|\\s+)"+a+"=([^;]*)(;|$)"),c=document.cookie.match(b);return c?unescape(c[2]):""},add:function(a,b,c,d,e){var f=new Date,g=30;c=c||g,f.setDate(f.getDate()+c),d=d||"/",e=document.domain||"dmall.com",document.cookie=escape(a)+"="+escape(b)+";expires="+f.toGMTString()+";path="+d+";domain="+e},del:function(a,b,c){var d=new Date,b=b||"/";c=c||"dmall.com",d.setTime(d.getTime()-1e4),document.cookie=a+"=; expires="+d.toGMTString()+";path="+b+";domain="+c}},a={checkInit:function(){var a=c.get(d.COOKIE_INITED),b=c.get(d.COOKIE_UPDATE_TIME),e=document.domain,f=30;a+""=="true"&&b+""!=""||c.add(d.COOKIE_UPDATE_TIME,(new Date).getTime(),f,"/",e),c.add(d.COOKIE_INITED,"false",f,"/",e)},getSourceRoot:function(){var b=(window.location.href,a.getRequest());return e?e:e=b.debuglocation&&/http:\/\/[A-Za-z0-9]+.dmall.com/.test(b.debuglocation)?b.debuglocation:d.STATIC_URL},getEvt:function(){var a=window.location.href,b="";return b=0==a.indexOf("http://test")&&a.indexOf("http://test.")==-1?"http://test":0==a.indexOf("http://dev")&&a.indexOf("http://dev.")==-1?"http://dev":"http://"},getRequest:function(a){var b,c,d,e={};switch(a=a||"search"){case"hash":b=window.top.location.href.split("#")[1]||"";break;case"search":b=window.top.location.href.split("?")[1]||"",b=b.split("#")[0]}for(d=b.split("&"),c=0;c<d.length;c++)e[d[c].split("=")[0]]=unescape(d[c].split("=")[1]);return e},loadJsWrapper:function(b,c){b=b||[];var d,e="UTF-8";return"string"==typeof b&&(b=[b]),d=b.shift(),d&&d.length?void a.loadJs(d,e,function(){a.loadJsWrapper(b,c)}):void("function"==typeof c&&c())},loadJs:function(a,b,c){var d=document.createElement("script"),e=document.getElementsByTagName("head")[0]||document.body;d.readyState?d.onreadystatechange=function(){"loaded"!=d.readyState&&"complete"!=d.readyState||(d.onreadystatechange=null,"function"==typeof c&&c())}:d.onload=function(){"function"==typeof c&&c()},d.charset=b,d.src=a,e.appendChild(d)}},a.checkInit(),window.kayak=window.kayak||{},window.kayak.Loader=b}();