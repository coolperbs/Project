!function(){var a,b,c={};a={getLoc:function(a,c){b.getLocation(function(b){var c,d=[];b&&b.coords&&(c=b.coords,d.push(c.longitude),d.push(c.latitude)),a(d,b.code)},c)},getAmapLoc:function(a,c,d){return d=d||b.getUrlParam(),d.lat&&d.lng?void a([d.lng,d.lat],""):void b.getAmapLocation(function(b){var b=b||{},c=[];b&&"-1"!=b.code&&(c.push(b.getLng()),c.push(b.getLat())),a(c,b.msg||"")},c)},getPoiByAmapLoc:function(a,b){if(!window.AMap)return b({code:"-1",msg:"找不到高德API"});if(!a||2!=a.length)return b({code:"-1",msg:"坐标错误"});var c=new AMap.Geocoder({radius:200,extensions:"all"});c.getAddress(new AMap.LngLat(a[0],a[1]),function(a,c){b("complete"===a&&"OK"===c.info?c.regeocode:{code:"-1",msg:"高德API调用失败"})})},getLocName:function(c,d){a.getLocInfo(c,function(a){d(b.formatAddress(a))})},getLocInfo:function(a,b){a="string"==typeof a?a:a.join(","),c.geocoder=c.geocoder||new AMap.Geocoder({radius:100,extensions:"all"}),c.geocoder.getAddress(a,function(a,c){return"complete"==a&&"OK"==c.info?void b(c):void b()})},getDistance:function(a,b){var c,d=-1;return a&&2==a.length&&b&&2==b.length?(c=new AMap.LngLat(a[0],a[1]),c.distance(b)):d},formatAddress:function(a){return b.formatAddress(a)}},b={getLocation:function(a,b){return b=b||5e3,window.navigator&&window.navigator.geolocation?void window.navigator.geolocation.getCurrentPosition(a,a,{enableHighAccuracy:!0,timeout:b}):void a()},getAmapLocation:function(a,b){b=b||7e3;var c,d=!1;return window.AMap?void AMap.plugin("AMap.Geolocation",function(){var e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:b,convert:!0}),f=!1;AMap.event.addListener(e,"complete",function(b){d||(clearTimeout(c),d=!0,f||(f=!0,a(b.accuracy&&b.position?b.position:{code:"-1",msg:"定位失败"})))}),AMap.event.addListener(e,"error",function(b){if(!d){clearTimeout(c),d=!0;var e="";switch(b.info){case"PERMISSION_DENIED":e="已拒绝定位";break;case"POSITION_UNAVAILBLE":e="定位不可用";break;case"TIMEOUT":e="定位超时";break;default:e="定位失败"}a({code:"-1",msg:e})}}),e.getCurrentPosition(),c=setTimeout(function(){d||(d=!0,a({code:"-1",msg:"定位失败"}))},b)}):a({code:"-1",msg:"找不到高德API"})},formatAddress:function(a){var b="";return a&&a.regeocode&&a.regeocode.pois&&a.regeocode.pois[0]&&(b+=a.regeocode.pois[0].name),b},getUrlParam:function(a){a=a||window.location.href;var b,c,d=a.split("?"),e=d[1]||"",f={};for(e=e.split("#")[0]||"",e=e.split("&"),b=0;c=e[b];++b)c=c.split("="),2==c.length&&(f[c[0]]=decodeURIComponent(c[1]));return f}},define("kayak/common/navigator/navigator",function(require,b,c){require("https://webapi.amap.com/maps?v=1.3&key=f385a15c3f290eb2a2b66dc74f3b72b7&plugin=AMap.Geocoder,AMap.Geolocation,AMap.PlaceSearch,AMap.Autocomplete"),c.exports=a})}();