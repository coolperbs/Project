!function(){var a,b,c,d,e={},f={};d={TIMEOUT:2e4,pubParamList:["utmSource","didiOpenId"],ticketWeChat:"ticketWeChat",tempId:"tempid",cookieSource:"_utm_source",cookieOpenid:"_didi_openid"},c={setGlobalParam:function(a){e=$.extend(e,a)},query:function(){var a,c,e,f,g=!1;if(3==arguments.length)a=arguments[0],e="json",c=arguments[1],f=arguments[2];else if(4==arguments.length)a=arguments[0],e=arguments[1],c=arguments[2],f=arguments[3];else{if(5!=arguments.length)return;a=arguments[0],e=arguments[1],c=arguments[2],f=arguments[3],g=arguments[4]}c=c||{},c=b.decorateParam(c),$.ajax({url:a,dataType:e||"json",data:c,xhrFields:{withCredentials:!0},type:"GET",cache:g,timeout:d.TIMEOUT,success:function(a){"function"==typeof f&&b.callbackProxy(a,f)},error:function(){var a={errCode:"-1",errMsg:"加载数据失败",data:{}};"function"==typeof f&&b.callbackProxy(a,f)}})},post:function(){var a,c,e,f;3==arguments.length&&(a=arguments[0],e="json",c=arguments[1],f=arguments[2],c=c||{},c=b.decorateParam(c),$.ajax({url:a,dataType:"json",data:c,xhrFields:{withCredentials:!0},type:"POST",cache:!1,timeout:d.TIMEOUT,success:function(a){"function"==typeof f&&b.callbackProxy(a,f)},error:function(){var a={errCode:"-1",errMsg:"加载数据失败",data:{}};"function"==typeof f&&b.callbackProxy(a,f)}}))},get:function(a){var b,c,d={};if("string"==typeof a)return f[a];for(b=0;c=a[b];++b)d[c]=f[c];return d},set:function(){var a,b;if(2==arguments.length)return void(f[arguments[0]]=arguments[1]);if(1!=arguments.length||"object"!=typeof arguments[0]);else{b=arguments[0];for(a in b)f[a]=b[a]}}},b={callbackProxy:function(b,c){b=b||{},b.cookie=b.cookie||{},a.writeByObject(b.cookie.set),a.deleteByList(b.cookie.del),"function"==typeof c&&c(b)},decorateParam:function(c){return c.token=a.get(d.ticketWeChat),c.source=b.isWxAgent()?1:2,c.tempid=a.get(d.tempId),c.pubParam=JSON.stringify(b.extPubParam()),c},extPubParam:function(){var c=a.get(d.cookieSource),e=a.get(d.cookieOpenid),f=b.getUrlAllParam(),g=d.pubParamList,h={},i=$.extend({utmSource:c,didiOpenId:e},f);for(var j in i)g.indexOf(j)>=0&&i[j]&&(h[j]=i[j]);return h},getUrlAllParam:function(a){a=a||window.location.href;var b,c,d=a.split("?"),e=d[1]||"",f={};for(e=e.split("#")[0]||"",e=e.split("&"),b=0;c=e[b];++b)c=c.split("="),2==c.length&&(f[c[0]]=decodeURIComponent(c[1]));return f},isWxAgent:function(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}},define("kayak/common/data/data",function(require,b,d){a=require("kayak/common/cookie/cookie"),d.exports=c})}();