!function(){var a,b,c,d,e,f,g,h,i,j=[];c={CONTAINER_CLS:"J_Menu",TREE_MENU_CLS:"cabinTreeMenu"},a={classname:"cabin-menu",jView:null,init:function(){b.init(),b.render(),b.bind(),b.selectMenu()}},b={init:function(){a.inited||(a.jView=f.get(a.classname,$("."+c.CONTAINER_CLS)),a.inited=!0)},render:function(){var c=a.jView;c.kInsert();var d=b.getTemp("J_menuTemp");c.find(".J_menuCont").html(d({menuList:i}))},bind:function(){a.hasBind||($(window).on("hashchange",function(){b.selectMenu()}),a.jView.on("click",function(a){var c=$(a.target);switch(!0){case b.isIn(c,"menu-sublist"):b.changeMenu(c)}}),a.hasBind=!0)},selectMenu:function(){var b=d.currentPath.split("/")[2],c=a.jView.find('.menu-sublist-txt[data-type="'+b+'"]'),e=c.parents(".menu-sublist"),f=e.parents(".menu-list"),g=a.jView.find(".menu-sublist"),h=a.jView.find(".menu-list");g.removeClass("active"),h.removeClass("active"),e.addClass("active"),f.addClass("active")},changeMenu:function(b){var c,e=b.hasClass("menu-sublist")?b:b.parents(".menu-sublist"),f=e.parents(".menu-list"),g=a.jView.find(".menu-sublist"),h=a.jView.find(".menu-list");e.length&&!e.hasClass("active")&&(g.removeClass("active"),h.removeClass("active"),e.addClass("active"),f.addClass("active"),c=e.find(".menu-sublist-txt").attr("data-url"),d.go(c))},getTemp:function(b){var c=a.jView;return j[b]=template.compile(c.find("."+b).text()),j[b]},isIn:function(a,b){return!!(a.hasClass(b)||a.parents("."+b).length>0)},isEmptyObject:function(a){if("object"==typeof a&&!(a instanceof Array)){var b=!1;for(var c in a){b=!0;break}return!b}}},define("cabin/modules/menu/menu",function(require,b,c){require("cabin/modules/menu/menu.css"),require("cabin/modules/menu/menu.tpl"),h=require("cabin/common/hash/hash"),i=require("cabin/config/menuconfig"),e=require("kayak/core/kayak"),d=require("kayak/core/router/router"),f=e.dom,g="ontouchend"in document?"touchstart":"click",c.exports=a})}();