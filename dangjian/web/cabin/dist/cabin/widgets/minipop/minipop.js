!function(){var a,b,c,d,e,f,g;d={POP_CONT_CLS:"J_minipopCont",POP_TEMP_CLS:"J_minipopTemp",MASK_CLS:"J_minipopMask",EVENT_ATTR:"data-type"},c={className:"cabin-widgets-minipop",jView:null,initView:!1,inited:!1,jPop:null,jMask:null,show:function(a){f=a,g.initView(),c.jView.kInsert();var b=c.jView,h=c.jPop;$(window).height();a.btnWidth=100/e.getObjLength(a.btns)+"%";var i=e.getTemp(d.POP_TEMP_CLS);h.html(i(a)),b.show(),b.css("opacity","0"),g.resetPop(),b.animate({opacity:1},200);var j=c.jView.find(".head"),k=c.jView.find(".content");0==j.length&&(j.css("display","none"),k.css("padding","24px 10px 20px 10px"))},hide:function(){g.exit()}},g={initView:function(){c.initView||(c.jView=b.get(c.className,a.jBody),g.initPop(),c.initView=!0)},exit:function(){var a=c.jView||"";a&&(a.hide(),a.kRemove())},initPop:function(){c.jPop=c.jView.find("."+d.POP_CONT_CLS),c.jMask=c.jView.find("."+d.MASK_CLS),g.bind()},bind:function(){var a=c.jMask,b=c.jPop,d=c.jView;b.on("click",function(a){var b=$(a.target);switch(!0){case g.isIn(b,"btn"):if(f.callback){if("function"==typeof f.callback){var c=g.getFunctionText(f.callback);if(c.length<1)d.hide();else{var e=b.hasClass("btn")?b:b.parents("btn"),h=e.attr("data-type");f.callback($(b),h),d.hide()}}}else d.hide()}}),a.on("click",function(a){a.preventDefault(),d.hide()}),$(window).resize(function(){g.resetPop()})},resetPop:function(){var a=c.jPop;a.css({marginTop:-(a.height()/2+60),marginLeft:-(a.width()/2)})},isIn:function(a,b){return!!(a.hasClass(b)||a.parents("."+b).length>0)},getFunctionText:function(a){if(a){var b=a.toString();b=b.replace(/\s+/g,"");var c=b.indexOf("{")+1;return b=b.substring(c).substring(0,b.substring(c).length-1)}}},define("cabin/widgets/minipop/minipop",function(require,d,g){require("cabin/widgets/minipop/minipop.tpl"),require("cabin/widgets/minipop/minipop.css"),f=null,e=require("kayak/common/utils/utils"),a=require("kayak/core/kayak"),b=a.dom,g.exports=c})}();