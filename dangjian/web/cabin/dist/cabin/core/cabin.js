define("cabin/layout/layout",function(require,a,b){function c(a){return a=$.extend(!0,d,a),g[a.name]=new h(c,a),g[a.name]}var d,e=["inited"],f={},g={},h=require("cabin/layout/layout.class"),i=require("cabin/layout/monitor");return d={name:"cabinindex",tpl:"cabin/layout/index/index.tpl"},$.extend(c,{on:function(a,b){if(!(e.indexOf(a)<0))return f[a]=f[a]||$.Callbacks(),"inited"==a&&f[a]&&f[a].hasFired===!0?void b():void f[a].add(b)},fire:function(a,b){e.indexOf(a)<0||(f[a]=f[a]||$.Callbacks(),f[a].fire(b),f[a].hasFired=!0)},setCurrent:function(a){this.current=a}}),i.on("inited",function(a){c.current=a,f.inited.hasFired||c.fire("inited")}),i.on("destroy",function(){f.inited.empty(),f.inited.hasFired=!1}),c}),define("cabin/layout/layout.class",function(require,a,b){function c(a,b){this.Layout=a,this.opt=$.extend(!0,{},b)}var d,e=kayak.dom,f=require("cabin/layout/monitor");return c.prototype={enter:function(){var a=d.getSource(this.opt),b=this;kayak.jBody.addClass("cabin"),seajs.use(a,function(){d.initDom.apply(b),d.initWidgets.apply(b),f.trigger("inited",b)})},exit:function(){this.jView.kRemove(),f.trigger("destroy")}},d={init:function(){this.jView=e.get()},initDom:function(){var a=this.opt;this.jView=e.get(a.name),this.jView.kInsert(kayak.jBody)},initWidgets:function(a){var b,c=this.opt.widgets;if(c)for(b in c)c[b]&&c[b].init&&c[b].init()},getSource:function(a){var b=[];return"string"==typeof a.tpl&&b.push(a.tpl),"[object Array]"==Object.prototype.toString.apply(a.tpl)&&b.concat(a.tpl),"string"==typeof a.css&&b.push(a.css),"[object Array]"==Object.prototype.toString.apply(a.css)&&b.concat(a.css),b}},c}),define("cabin/layout/monitor",function(){return $({})}),function(){define("cabin/page/page",function(require){function a(a){b.filter.apply(this,[a])}var b,c=require("cabin/layout/layout"),d=require("lib/arttemplate3.0/template-native"),e=kayak.dom,f=["enter","exit","render","temps"];return a.prototype={enter:function(){var a=this;c.on("inited",function(){var c=b.getSource.apply(a);seajs.use(c,function(){b.initDom.apply(a),a.inited||(b.bind.apply(a),a.inited=!0),a.show&&a.show()})})},exit:function(){var a=this;a.temps={},a.jView&&a.jView.kRemove(),a.hide&&a.hide()},render:function(a){if(!!a||!a.data){var b=a["class"],c=a.tempclass?a.tempclass:null,e=a.data,f=this.jView,g=this.temps[b];c?(this.temps[c]=d.compile(f.find("script."+c).text()),g=this.temps[c]):(this.temps[b]=d.compile(f.find("script."+b).text()),g=this.temps[b]),f.find("div."+b).html(g(e))}},temps:{}},b={initDom:function(){var a=this;return this.jView?void this.jView.kInsert($("."+a.parentClass)):(this.jView=e.get(a.nodeClass),void(a.parentClass&&this.jView.kInsert($("."+a.parentClass))))},getSource:function(){var a,c,d=["tpl","css","source"],e=this,f=[];for(a=0;c=d[a];++a)f=f.concat(b.parseSource(e[c])||[]);return f},parseSource:function(a){if(a){var b=[];return"string"==typeof a&&b.push(a),"[object Array]"==Object.prototype.toString.apply(a)&&(b=b.concat(a)),b}},bind:function(){var a,b,c,d=this;if("[object Object]"===Object.prototype.toString.apply(d.on))for(a in d.on)c=$.trim(a).split(" "),b=c.shift(),d.jView.on(b,c.join(" "),d.on[a])},filter:function(a){for(var b in a)if(!(f.indexOf(b)>-1)){var c={};c[b]=a[b],$.extend(this,c)}}},window.Page=function(b){return new a(b)},function(b){return new a(b)}})}(),function(){var a,b,c,d,e,f,g;d={POP_CONT_CLS:"J_minipopCont",POP_TEMP_CLS:"J_minipopTemp",MASK_CLS:"J_minipopMask",EVENT_ATTR:"data-type"},c={className:"cabin-widgets-minipop",jView:null,initView:!1,inited:!1,jPop:null,jMask:null,show:function(a){f=a,g.initView(),c.jView.kInsert();var b=c.jView,h=c.jPop;$(window).height();a.btnWidth=100/e.getObjLength(a.btns)+"%";var i=e.getTemp(d.POP_TEMP_CLS);h.html(i(a)),b.show(),b.css("opacity","0"),g.resetPop(),b.animate({opacity:1},200);var j=c.jView.find(".head"),k=c.jView.find(".content");0==j.length&&(j.css("display","none"),k.css("padding","24px 10px 20px 10px"))},hide:function(){g.exit()}},g={initView:function(){c.initView||(c.jView=b.get(c.className,a.jBody),g.initPop(),c.initView=!0)},exit:function(){var a=c.jView||"";a&&(a.hide(),a.kRemove())},initPop:function(){c.jPop=c.jView.find("."+d.POP_CONT_CLS),c.jMask=c.jView.find("."+d.MASK_CLS),g.bind()},bind:function(){var a=c.jMask,b=c.jPop,d=c.jView;b.on("click",function(a){var b=$(a.target);switch(!0){case g.isIn(b,"btn"):if(f.callback){if("function"==typeof f.callback){var c=g.getFunctionText(f.callback);if(c.length<1)d.hide();else{var e=b.hasClass("btn")?b:b.parents("btn"),h=e.attr("data-type");f.callback($(b),h),d.hide()}}}else d.hide()}}),a.on("click",function(a){a.preventDefault(),d.hide()}),$(window).resize(function(){g.resetPop()})},resetPop:function(){var a=c.jPop;a.css({marginTop:-(a.height()/2+60),marginLeft:-(a.width()/2)})},isIn:function(a,b){return!!(a.hasClass(b)||a.parents("."+b).length>0)},getFunctionText:function(a){if(a){var b=a.toString();b=b.replace(/\s+/g,"");var c=b.indexOf("{")+1;return b=b.substring(c).substring(0,b.substring(c).length-1)}}},define("cabin/widgets/minipop/minipop",function(require,d,g){require("cabin/widgets/minipop/minipop.tpl"),require("cabin/widgets/minipop/minipop.css"),f=null,e=require("kayak/common/utils/utils"),a=require("kayak/core/kayak"),b=a.dom,g.exports=c})}(),function(){function a(a,b){this.opt=null,this.id=a,this.spin={head:1,end:9},this.init(b)}var b,c,d={pageSize:30,currentPage:1,totalCount:0,callback:null,container:null,pageRange:9,select:[30,60,100],showTotal:!1,position:null};a.prototype={init:function(a){if(this.id&&"function"==typeof a.callback){var e=$("#"+this.id),f=$(b).clone();this.opt={pageSize:a.pageSize?a.pageSize:d.pageSize,currentPage:a.currentPage?a.currentPage:d.currentPage,totalCount:a.totalCount?a.totalCount:d.totalCount,callback:a.callback?a.callback:d.callback,select:a.select?a.select:d.select,pageRange:a.pageRange?a.pageRange:d.pageRange,position:a.position?a.position:d.position,showTotal:a.showTotal?a.showTotal:d.showTotal},e.html(""),this.opt.position&&f.addClass(this.opt.position),e.append(f),c.formatOptions.apply(this),c.updateSpin.apply(this),c.render.apply(this),c.bind.apply(this)}},update:function(a){for(k in a)this.opt[k]=a[k];c.formatOptions.apply(this),c.updateSpin.apply(this),c.render.apply(this)},next:function(a){if(!$(a.target).hasClass("disabled")){var b=Math.ceil(this.opt.totalCount/this.opt.pageSize);this.opt.currentPage+1>b?this.opt.currentPage=b:this.opt.currentPage+=1,c.updateSpin.apply(this),c.render.apply(this,[!0])}},prev:function(a){$(a.target).hasClass("disabled")||(this.opt.currentPage-1<1?this.opt.currentPage=1:this.opt.currentPage-=1,c.updateSpin.apply(this),c.render.apply(this,[!0]))}},c={bind:function(){var a=$("#"+this.id),b=a.find(".nextpage-pagelist"),d=a.find(".nextpage-input"),e=a.find(".prev"),f=a.find(".next"),g=a.find(".nextpage-select-input"),h=a.find(".nextpage-select-chosen"),i=this;b.on("click",function(a){a.stopPropagation(),c.checkPage.apply(i,[a])}),e.on("click",function(a){a.stopPropagation(),i.prev(a)}),f.on("click",function(a){a.stopPropagation(),i.next(a)}),d.on("click",function(a){a.stopPropagation()}),d.on("keyup",function(a){c.setCurrentPage.apply(i,[a])}),g.on("click",function(a){a.stopPropagation(),c.showSelect.apply(i,[a])}),h.on("click",function(a){a.stopPropagation(),c.chosenCheck.apply(i,[a])}),$("body").on("click",function(a){a.stopPropagation(),c.hideSelect.apply(i,[a])})},render:function(a){var b=$("#"+this.id),c=b.find(".nextpage-pagelist"),d=b.find(".nextpage-select-input"),e=b.find(".nextpage-input"),f=b.find(".prev"),g=b.find(".next"),h=b.find(".nextpage-select-chosen"),i=b.find(".total"),j=Math.ceil(this.opt.totalCount/this.opt.pageSize),k="",l="",m=1;if(j>10){for(m=this.spin.head;m<this.spin.end+1;m++)k+=this.opt.currentPage===m?'<li class="active" data-page="'+m+'">'+m+"</li>":'<li data-page="'+m+'">'+m+"</li>";this.opt.currentPage<this.opt.pageRange?(k+="<li>...</li>",k+='<li data-page="'+j+'">'+j+"</li>",c.html(""),c.html(k)):this.spin.end<j?(k='<li data-page="1">1</li></li><li data-page="'+m+'">...</li>'+k,k+="<li>...</li>",k+='<li data-page="'+j+'">'+j+"</li>",c.html(""),c.html(k)):(k='<li data-page="1">1</li></li><li>...</li>'+k,c.html(""),c.html(k))}else{for(m=1;m<=j;m++)k+=this.opt.currentPage===m?'<li class="active" data-page="'+m+'">'+m+"</li>":'<li data-page="'+m+'">'+m+"</li>";c.html(""),c.html(k)}for(m=0;m<this.opt.select.length;m++)l+=this.opt.pageSize===this.opt.select[m]?'<li class="active" data-size="'+this.opt.select[m]+'">'+this.opt.select[m]+"</li>":'<li data-size="'+this.opt.select[m]+'">'+this.opt.select[m]+"</li>";e.val(this.opt.currentPage),d.html(this.opt.pageSize),h.html(l),this.opt.showTotal&&i.html("共"+this.opt.totalCount+"条"),f.removeClass("disabled"),g.removeClass("disabled"),1===this.opt.currentPage&&f.addClass("disabled"),this.opt.currentPage===j&&g.addClass("disabled"),a&&this.opt.callback(JSON.parse(JSON.stringify(this.opt)))},checkPage:function(a){var b=$(a.target),d=b.attr("data-page");d&&(d=Number(d),isNaN(d)&&(d=1),this.opt.currentPage!==d&&(this.opt.currentPage=d,c.updateSpin.apply(this),c.render.apply(this,[!0])))},updateSpin:function(){var a=Math.ceil(this.opt.totalCount/this.opt.pageSize);this.opt.currentPage>this.opt.pageRange-1?(this.spin.head=this.opt.currentPage-4,this.spin.end=this.opt.currentPage+4,this.spin.end>a&&(this.spin.end=a,this.spin.head=this.spin.end-8)):(this.spin.head=1,this.spin.end=9)},setCurrentPage:function(a){var b=Math.ceil(this.opt.totalCount/this.opt.pageSize),d=$(a.target),e=d.val();e&&(e=Number(e),isNaN(e)&&(e=1),13===a.keyCode&&(e>b&&(e=b),this.opt.currentPage=e,c.updateSpin.apply(this),c.render.apply(this,[!0])))},showSelect:function(a){var b=$("#"+this.id),c=b.find(".nextpage-select-input"),d=b.find(".nextpage-select-chosen"),e=c.offset().top,f=$(document).height(),g=f-e;d.removeClass("top bottom"),g>150?d.addClass("bottom active"):d.addClass("top active")},hideSelect:function(a){var b=$("#"+this.id),c=b.find(".nextpage-select-chosen");c.removeClass("active")},chosenCheck:function(a){var b=$(a.target),d=b.attr("data-size");d&&(d=Number(d),isNaN(d)&&(d=this.opt.select[0]),this.opt.pageSize!==d&&(this.opt.pageSize=d,this.opt.currentPage=1,c.updateSpin.apply(this),c.render.apply(this,[!0]),c.hideSelect.apply(this)))},formatOptions:function(){this.opt.pageSize=isNaN(Number(this.opt.pageSize))?d.pageSize:Number(this.opt.pageSize),this.opt.currentPage=isNaN(Number(this.opt.currentPage))?d.currentPage:Number(this.opt.currentPage),this.opt.totalCount=isNaN(Number(this.opt.totalCount))?d.totalCount:Number(this.opt.totalCount),this.opt.pageRange=isNaN(Number(this.opt.pageRange))?d.pageRange:Number(this.opt.pageRange);var a=this;$.each(this.opt.select,function(b,c){isNaN(Number(c))?a.opt.select[b]=d.select[b]:a.opt.select[b]=Number(c)})}},$.fn.NextPage=function(b){var c=this.prop("id");return new a(c,b)},define("cabin/widgets/nextpage/nextpage",function(require,c,d){b=require("cabin/widgets/nextpage/nextpage.tpl"),d.exports=function(b,c){return new a(b,c)}})}(),function(){var a,b,c,d,e,f,g,h;d={POP_CONT_CLS:"J_PopCont",POP_TEMP_CLS:"J_PopTemp",MASK_CLS:"J_PopMask",EVENT_ATTR:"data-type"},c={className:"cabin-widgets-pop",jView:null,initView:!1,inited:!1,jPop:null,jMask:null,hideCallback:null,show:function(a){if(a&&a.btns){f=a,h.initView(),c.jView.kInsert();var b=c.jView,g=c.jPop;$(window).height();a.btnWidth=100/e.getObjLength(a.btns)+"%";var i=e.getTemp(d.POP_TEMP_CLS);g.html(i(a)),b.show(),b.css("opacity","0"),h.resetPop(),b.animate({opacity:1},200);var j=c.jView.find(".head"),k=c.jView.find(".content");0==j.length&&(j.css("display","none"),k.css("padding","24px 10px 20px 10px")),a.pophide&&"function"==typeof a.pophide&&(c.hideCallback=a.pophide)}},alert:function(a){},confirm:function(a){},hide:function(){h.exit()}},h={initView:function(){c.initView||(c.jView=b.get(c.className,a.jBody),h.initPop(),c.initView=!0)},exit:function(){var a=c.jView||"";a&&(a.hide(),a.kRemove(),c.hideCallback&&"function"==typeof c.hideCallback&&c.hideCallback())},initPop:function(){c.jPop=c.jView.find("."+d.POP_CONT_CLS),c.jMask=c.jView.find("."+d.MASK_CLS),h.bind()},bind:function(){var a=c.jMask,b=c.jPop,e=c.jView;b.on(g,function(a){var b=$(a.target),c=b.attr(d.EVENT_ATTR),g=f.btns;g[c]&&e.hide(),g[c]&&"function"==typeof g[c].click&&g[c].click(a)}),a.on(g,function(a){a.preventDefault(),e.hide(),"function"==typeof f.onClickMask&&f.onClickMask()}),$(window).resize(function(){h.resetPop()})},resetPop:function(){var a=c.jPop;a.css({marginTop:-(a.height()/2+60),marginLeft:-(a.width()/2)})}},define("cabin/widgets/pop/pop",function(require,d,h){require("cabin/widgets/pop/pop.tpl"),require("cabin/widgets/pop/pop.css"),f=null,g="click",e=require("kayak/common/utils/utils"),a=require("kayak/core/kayak"),b=a.dom,h.exports=c})}(),function(){var a,b,c,d,e;e={SHOWTIME:2e3,HIDETIME:800,TIMESTEP:1500,SHOW_CLS:"show"},c={className:"cabin-widgets-loading",initView:!1,jView:null,jBox:null,timmer:null,startTime:null,show:function(a){a=a||0,d.initView(),c.jView.kInsert();var b=c.jView,f=c.jBox||b.find(".vertical-box");return c.jView=b,c.jBox=f,a>0?void(c.timmer=setTimeout(function(){c.startTime=(new Date).getTime(),b.addClass(e.SHOW_CLS)},a)):(c.startTime=(new Date).getTime(),void b.addClass(e.SHOW_CLS))},hide:function(){var a,b=c.jView,f=c.jBox||b&&b.find(".vertical-box")||null;c.timmer&&clearTimeout(c.timmer),a=0,setTimeout(function(){b&&f?(b.removeClass(e.SHOW_CLS),setTimeout(function(){d.exit()},e.HIDETIME)):d.exit()},a)}},d={initView:function(){c.initView||(c.jView=b.get(c.className,a.jBody),c.initView=!0)},exit:function(){var a=c.jView;a&&a.kRemove()}},define("cabin/widgets/loading/loading",function(require,d,e){require("cabin/widgets/loading/loading.tpl"),require("cabin/widgets/loading/loading.css"),a=require("kayak/core/kayak"),b=a.dom,e.exports=c})}(),function(){var a,b,c,d,e;d={SHOWTIME:2e3},c={className:"cabin-widgets-tips",jView:null,initView:!1,timmer:null,show:function(a,b){e.initView(),c.jView.kInsert();var f=c.jView,b=b||d.SHOWTIME;clearTimeout(c.timmer),f.show().animate({opacity:1},400).find("span").html(a),c.timmer=setTimeout(function(){c.hide()},b)},hide:function(){var a=c.jView;a&&a.animate({opacity:0},{duration:400,complete:function(){e.exit()}})}},e={initView:function(){c.initView||(c.jView=b.get(c.className,a.jBody),c.initView=!0)},exit:function(){var a=c.jView;a.hide(),a.kRemove()}},define("cabin/widgets/tips/tips",function(require,d,e){require("cabin/widgets/tips/tips.tpl"),require("cabin/widgets/tips/tips.css"),a=require("kayak/core/kayak"),b=a.dom,e.exports=c})}(),function(){var a;a={},define("cabin/core/cabin",function(require,b,c){require("cabin/lib/bootstrap/js/bootstrap.js");var d=require("cabin/layout/layout"),e=require("cabin/page/page"),f=require("cabin/widgets/minipop/minipop"),g=require("cabin/widgets/nextpage/nextpage"),h=require("cabin/widgets/pop/pop"),i=require("cabin/widgets/loading/loading"),j=require("cabin/widgets/tips/tips"),k=require("cabin/common/tools/tools");require("cabin/lib/suggester/suggester"),window.cabin=$.extend(a,{layout:d,Page:e,widgets:{minipop:f,nextpage:g,pop:h,loading:i,tips:j},tools:k}),c.exports=a})}(),function(){var a;a={get:function(a){var b=new RegExp("(^|;|\\s+)"+a+"=([^;]*)(;|$)"),c=document.cookie.match(b);return c?unescape(c[2]):""},add:function(a,b,c,d,e){var f,g=new Date,h=30;if(f=c||h,g.setDate(g.getDate()+f),d=d||"/",e=location.host.indexOf(".dmall.com")>0?"dmall.com":document.domain,"session"==c){var i=!!window.ActiveXObject||"ActiveXObject"in window;return void(i?document.cookie=escape(a)+"="+escape(b)+";expires=At the end of the Session;path="+d+";domain="+e:document.cookie=escape(a)+"="+escape(b)+";expires=Session;path="+d+";domain="+e)}document.cookie=escape(a)+"="+escape(b)+";expires="+g.toGMTString()+";path="+d+";domain="+e},del:function(a,b,c){var d=new Date,b=b||"/";c=location.host.indexOf(".dmall.com")>0?"dmall.com":c,d.setTime(d.getTime()-1e4),document.cookie=a+"=; expires="+d.toGMTString()+";path="+b+";domain="+c},writeByObject:function(b){if(b){var c,d;for(c in b)d=b[c]+"",c&&d&&a.add(c,b[c])}},deleteByList:function(b){if(b){var c,d;for(c=0;d=b[c];++c)a.del(d)}}},define("cabin/common/cookie/cookie",function(require,b,c){c.exports=a})}(),function(){var a={getUrlData:function(){var a=kayak.router.requestParam;return a=a.data?a.data:{},JSON.parse(a)},jumpPge:function(a,b){kayak.router.go(a+":data="+JSON.stringify(b))}};define("cabin/common/tools/tools",function(require,b,c){require("kayak/core/kayak");var d=require("cabin/common/cookie/cookie"),e=require("cabin/common/widgets/dmFromValidate"),f={cookie:d,validate:e};$.extend(a,f),c.exports=a})}();